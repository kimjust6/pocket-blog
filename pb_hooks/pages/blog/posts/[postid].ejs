<script server>
    
    // Get an authenticated client for the current request
    const client = pb({ request })
    const blogposts = client.collection('blogposts').getList(
        1, // page
        3, // perPage
        {
            sort: '-created',
            filter: 'isDeleted = false'
        });

    const singleBlog = blogposts.items.find(post => post.id === params.postId);
</script>

<template id="counter-template">
    My count is {{ count }}
    <button @click="inc">+</button>

</template>

<% if (typeof(params.postId) === "undefined") { %>
    <div class="hero min-h-screen bg-base-200">
        <div class="hero-content text-center">
            <!-- <div v-scope="Pocket()">
                <button @click="getBlogPosts">dank</button>
            </div> -->
            <div class="max-w-md">
                <h1 class="text-5xl font-bold">Latest Posts</h1>
                <p class="py-6">Here are the latest posts.  </p>
                <% blogposts?.items?.forEach(blog => { %>
                    <ul>
                        <a href="/blog/posts/<%= blog.id %>"><%= blog.title %></a>
                    </ul>
                <% }) %>
            </div>
        </div>
    </div>
<% } else { %>
    <div class="hero min-h-screen bg-base-200">
        <div class="hero-content text-center">
            <div class="max-w-md">
                <h1 class="text-5xl font-bold"><%= singleBlog.title %></h1>
                <p class="py-6"><%= singleBlog.content %></p>
            </div>
        </div>
    </div>
<% } %>

